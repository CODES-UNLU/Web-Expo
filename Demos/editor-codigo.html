<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Editor visual paso a paso del Stand de Sistemas de la Expo UNLu 2025. Creá texto, figuras y animaciones sin saber programar." />
    <meta name="keywords" content="UNLu, Sistemas, Expo, Editor, Visual, HTML, CSS, Animaciones" />
    <meta name="author" content="CODES++ - Centro de Estudiantes de Sistemas UNLu" />
    <meta property="og:title" content="Editor Visual - Expo UNLu" />
    <meta property="og:description" content="Creá texto, figuras y animaciones paso a paso" />
    <meta property="og:type" content="website" />
    <link rel="icon" type="image/x-icon" href="../LogoCodes.png" />
    <title>Editor Visual - Expo UNLu</title>
    <link rel="stylesheet" href="../styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
/* Asegurar que el navbar esté fijo */
nav {
  position: sticky !important;
  top: 0 !important;
  z-index: 1000 !important;
}

.step { display: none; }
.step.active { display: block; }
/***** Moderno y responsive *****/
.container {
  max-width: 600px;
  margin: 2.5rem auto;
  padding: 2.2rem 1.2rem;
  border-radius: 18px;
  box-shadow: 0 8px 32px rgba(102,126,234,0.10);
  background: rgba(255,255,255,0.97);
}
.step-header {
  text-align: center;
  margin-bottom: 1.5rem;
  padding-bottom: 0.7rem;
  border-bottom: 2px solid #e2e8f0;
}
.step-number {
  display: inline-block;
  width: 38px;
  height: 38px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border-radius: 50%;
  line-height: 38px;
  font-weight: bold;
  margin-bottom: 0.7rem;
  font-size: 1.2rem;
}
.step-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: #2d3748;
  margin-bottom: 0.3rem;
}
.step-description {
  color: #718096;
  font-size: 1.05rem;
}
.control-group {
  margin-bottom: 1.2rem;
  text-align: left;
}
.control-group label {
  display: block;
  margin-bottom: 0.4rem;
  font-weight: 600;
  color: #4a5568;
  font-size: 1.05rem;
}
.control-group input, .control-group select {
  width: 100%;
  padding: 0.8rem;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  font-size: 1rem;
  background: #f7fafc;
  margin-bottom: 0.2rem;
  transition: border 0.2s, box-shadow 0.2s;
}
.control-group input:focus, .control-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 2px #667eea33;
  background: #fff;
}
.color-picker {
  display: flex;
  gap: 0.7rem;
  align-items: center;
}
.color-picker input[type="color"] {
  width: 48px;
  height: 36px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(102,126,234,0.10);
}
.color-picker input[type="text"] {
  flex: 1;
}
.range-group {
  display: flex;
  align-items: center;
  gap: 0.7rem;
}
.range-group input[type="range"] {
  flex: 1;
}
.range-group span {
  min-width: 48px;
  font-weight: 600;
  color: #667eea;
}
.button-group {
  display: flex;
  gap: 0.7rem;
  justify-content: center;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}
.btn-step, .btn-step.secondary {
  padding: 0.9rem 1.7rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  font-size: 1.05rem;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 120px;
  box-shadow: 0 2px 8px rgba(102,126,234,0.10);
  margin-bottom: 0.5rem;
}
.btn-step.secondary {
  background: #e2e8f0;
  color: #4a5568;
}
.btn-step:hover {
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.18);
}
.preview-section {
  text-align: center;
  margin: 1.5rem 0;
  padding: 1.5rem;
  background: #f7fafc;
  border-radius: 14px;
  border: 2px dashed #e2e8f0;
}
.preview-frame {
  width: 100%;
  min-height: 220px;
  max-height: 350px;
  background: white;
  border-radius: 10px;
  padding: 1.2rem;
  margin: 1rem 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(102,126,234,0.10);
  overflow: auto;
}
.code-modal {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.7);
  z-index: 9999;
  align-items: center;
  justify-content: center;
  transition: opacity 0.2s;
}
.code-modal.show {
  display: flex;
}
.code-content {
  background: #fff;
  border-radius: 16px;
  padding: 2rem 1.2rem;
  max-width: 95vw;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  margin: auto;
  text-align: left;
}
.code-display {
  background: #1a202c;
  color: #e2e8f0;
  padding: 1.2rem;
  border-radius: 10px;
  font-family: 'Courier New', monospace;
  font-size: 0.98rem;
  overflow-x: auto;
  margin: 1rem 0;
}
.code-display h4 {
  color: #667eea;
  margin-bottom: 0.7rem;
  font-size: 1.05rem;
}
.close-modal {
  position: absolute;
  top: 1.2rem;
  right: 1.2rem;
  background: none;
  border: none;
  font-size: 1.7rem;
  color: #718096;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: background 0.2s;
}
.close-modal:hover {
  background: #f7fafc;
  color: #4a5568;
}
@media (max-width: 700px) {
  .container {
    padding: 1.1rem 0.3rem;
    margin: 1.2rem 0.2rem;
    border-radius: 12px;
  }
  .step-header {
    margin-bottom: 1rem;
    padding-bottom: 0.4rem;
  }
  .button-group {
    flex-direction: column;
    gap: 0.5rem;
  }
  .btn-step, .btn-step.secondary {
    width: 100%;
    min-width: unset;
    font-size: 1rem;
    padding: 0.8rem 0.5rem;
  }
  .preview-section {
    padding: 0.7rem;
    border-radius: 8px;
  }
  .preview-frame {
    min-height: 120px;
    max-height: 180px;
    padding: 0.5rem;
    border-radius: 7px;
  }
  .step-number {
    width: 30px;
    height: 30px;
    font-size: 1rem;
    line-height: 30px;
  }
  .code-content {
    padding: 1rem 0.3rem;
    border-radius: 8px;
    max-width: 99vw;
    max-height: 90vh;
  }
  .code-display {
    font-size: 0.92rem;
    padding: 0.7rem;
  }
  #finalActions {
    display: block !important;
  }
  #finalActions .ver-pagina-group {
    margin-top: 1.2rem;
  }
}
</style>
  </head>
  <body>
    <nav>
      <div class="nav-container">
        <div class="nav-logo">
          <a href="https://www.sistemas.unlu.edu.ar/" target="_blank">
            <img src="../logoLSIUNLu.svg" alt="Logo Licenciatura en Sistemas de Información UNLu" height="40" />
          </a>
        </div>
        <ul class="menu">
          <li><a href="../index.html"><i class="fas fa-home"></i> Inicio</a></li>
          <li><a href="../index.html#actividades"><i class="fas fa-gamepad"></i> Actividades</a></li>
          <li><a href="demostraciones.html"><i class="fas fa-flask"></i> Demostraciones</a></li>
          <li><a href="../utec.html"><i class="fas fa-university"></i> UTEC</a></li>
          <li><a href="../faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
        </ul>
        <div class="nav-right">
          <a href="https://codes-unlu.github.io/Web-Codes/" class="nav-logo">
            <img src="../LogoCodes.png" alt="Logo CODES++ Centro de Estudiantes" height="40" />
          </a>
        </div>
        <button class="menu-toggle" onclick="toggleMenu()" aria-label="Abrir menú de navegación">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <header>
      <div class="header-row">
        <h1><i class="fas fa-palette"></i> Editor Visual Paso a Paso</h1>
      </div>
    </header>

    <div class="container">
      <!-- Eliminar la pantalla de bienvenida y el botón Comenzar -->
      <!-- Paso 1: Texto -->
      <div class="step-container" id="stepsContainer" style="min-height:60vh;">
        <div id="step1" class="step active">
          <div class="step-header">
            <div class="step-number">1</div>
            <h3 class="step-title">Escribí tu texto</h3>
            <p class="step-description">Empecemos con el texto que quieres mostrar</p>
          </div>
          
          <div class="control-group">
            <label for="textInput">¿Qué texto querés mostrar?</label>
            <input type="text" id="textInput" placeholder="Escribí tu mensaje aquí..." value="¡Hola Mundo!">
          </div>
          
          <div class="control-group">
            <label for="fontSize">Tamaño del texto</label>
            <div class="range-group">
              <input type="range" id="fontSize" min="16" max="72" value="32">
              <span id="fontSizeValue">32px</span>
            </div>
          </div>
          
          <div class="control-group">
            <label for="fontFamily">Tipo de letra</label>
            <select id="fontFamily">
              <option value="Arial, sans-serif">Arial (Simple)</option>
              <option value="Times New Roman, serif">Times New Roman (Elegante)</option>
              <option value="Courier New, monospace">Courier New (Máquina de escribir)</option>
              <option value="Georgia, serif">Georgia (Clásica)</option>
              <option value="Verdana, sans-serif">Verdana (Fácil de leer)</option>
            </select>
          </div>
          
          <div class="button-group">
            <button class="btn-step" onclick="nextStep(2)">
              <i class="fas fa-arrow-right"></i> Siguiente
            </button>
          </div>
          <div class="preview-section" id="previewTextSection">
            <div id="previewText"></div>
          </div>
        <div class="highlight"><div class="highlight-icon"><i class="fas fa-lightbulb"></i></div><div class="highlight-content"><strong>💡 Tip:</strong> Escribí un mensaje claro y divertido. Podés cambiar el tamaño y la fuente del texto.</div></div>
        </div>

        <!-- Paso 2: Figura -->
        <div id="step2" class="step">
          <div class="step-header">
            <div class="step-number">2</div>
            <h3 class="step-title">Agregá una figura</h3>
            <p class="step-description">Elegí una figura para acompañar tu texto</p>
          </div>
          <div class="control-group">
            <label for="shapeType">¿Qué figura querés?</label>
            <select id="shapeType">
              <option value="circle">Círculo</option>
              <option value="square">Cuadrado</option>
              <option value="triangle">Triángulo</option>
              <option value="star">Estrella ⭐</option>
              <option value="pentagon">Pentágono</option>
              <option value="none">No quiero figura</option>
            </select>
          </div>
          <div class="control-group">
            <label for="shapeSize">Tamaño de la figura</label>
            <div class="range-group">
              <input type="range" id="shapeSize" min="30" max="150" value="80">
              <span id="shapeSizeValue">80px</span>
            </div>
          </div>
          <div class="control-group">
            <label for="shapeColor">Color de la figura</label>
            <div class="color-picker">
              <input type="color" id="shapeColor" value="#48bb78">
              <input type="text" id="shapeColorHex" value="#48bb78" placeholder="#48bb78">
            </div>
          </div>
          <div class="shape-preview" id="shapePreview">
            <div id="previewShape"></div>
          </div>
          <div class="button-group">
            <button class="btn-step secondary" onclick="nextStep(1)">
              <i class="fas fa-arrow-left"></i> Volver
            </button>
            <button class="btn-step" onclick="nextStep(3)">
              <i class="fas fa-arrow-right"></i> Siguiente
            </button>
          </div>
        <div class="highlight"><div class="highlight-icon"><i class="fas fa-lightbulb"></i></div><div class="highlight-content"><strong>💡 Tip:</strong> Las figuras hacen tu diseño más atractivo. Elegí la que más te guste, experimentá con tamaños y colores.</div></div>
        </div>

        <!-- Paso 3: Animación de texto -->
        <div id="step3" class="step">
          <div class="step-header">
            <div class="step-number">3</div>
            <h3 class="step-title">Animá el texto</h3>
            <p class="step-description">Elegí una animación para el texto</p>
          </div>
          <div id="textAnimControls">
            <div class="control-group">
              <label for="animationTypeText">Animación para el texto</label>
              <select id="animationTypeText">
                <option value="none">Sin animación</option>
                <option value="bounce">Rebote</option>
                <option value="pulse">Pulso</option>
                <option value="rotate">Rotación</option>
                <option value="slide">Deslizamiento</option>
                <option value="fadeIn">Aparecer</option>
                <option value="glow">Brillo</option>
              </select>
            </div>
            <div class="control-group">
              <label for="animationDurationText">Velocidad de la animación (texto)</label>
              <div class="range-group">
                <input type="range" id="animationDurationText" min="0.5" max="3" step="0.1" value="1">
                <span id="animationDurationValueText">1s</span>
              </div>
            </div>
            <div class="control-group">
              <label for="animationRepeatText">¿Cuántas veces se repite? (texto)</label>
              <select id="animationRepeatText">
                <option value="1">Una vez</option>
                <option value="infinite">Infinito</option>
                <option value="3">3 veces</option>
                <option value="5">5 veces</option>
              </select>
            </div>
          </div>
          <div class="button-group">
            <button class="btn-step secondary" onclick="nextStep(2)">
              <i class="fas fa-arrow-left"></i> Volver
            </button>
            <button class="btn-step" onclick="nextStep(4)">
              <i class="fas fa-arrow-right"></i> Siguiente
            </button>
          </div>
        <div class="highlight"><div class="highlight-icon"><i class="fas fa-lightbulb"></i></div><div class="highlight-content"><strong>💡 Tip:</strong> Las animaciones le dan vida a tu texto. Probá diferentes efectos y velocidades.</div></div>
          </div>

        <!-- Paso 4: Animación de figura -->
        <div id="step4" class="step">
          <div class="step-header">
            <div class="step-number">4</div>
            <h3 class="step-title">Animá la figura</h3>
            <p class="step-description">Elegí una animación para la figura</p>
          </div>
          <div id="shapeAnimControls">
            <div class="control-group">
              <label for="animationTypeShape">Animación para la figura</label>
              <select id="animationTypeShape">
                <option value="none">Sin animación</option>
                <option value="bounce">Rebote</option>
                <option value="pulse">Pulso</option>
                <option value="rotate">Rotación</option>
                <option value="slide">Deslizamiento</option>
                <option value="fadeIn">Aparecer</option>
                <option value="glow">Brillo</option>
              </select>
            </div>
            <div class="control-group">
              <label for="animationDurationShape">Velocidad de la animación (figura)</label>
              <div class="range-group">
                <input type="range" id="animationDurationShape" min="0.5" max="3" step="0.1" value="1">
                <span id="animationDurationValueShape">1s</span>
              </div>
            </div>
            <div class="control-group">
              <label for="animationRepeatShape">¿Cuántas veces se repite? (figura)</label>
              <select id="animationRepeatShape">
                <option value="1">Una vez</option>
                <option value="infinite">Infinito</option>
                <option value="3">3 veces</option>
                <option value="5">5 veces</option>
              </select>
            </div>
          </div>
          <div class="button-group">
            <button class="btn-step secondary" onclick="nextStep(3)">
              <i class="fas fa-arrow-left"></i> Volver
            </button>
            <button class="btn-step" onclick="nextStep(5)">
              <i class="fas fa-arrow-right"></i> Siguiente
            </button>
          </div>
        <div class="highlight"><div class="highlight-icon"><i class="fas fa-lightbulb"></i></div><div class="highlight-content"><strong>💡 Tip:</strong> Las animaciones le dan vida a tu figura. Probá diferentes efectos y velocidades.</div></div>
        </div>

        <!-- Paso 5: Fondo -->
        <div id="step5" class="step">
          <div class="step-header">
            <div class="step-number">5</div>
            <h3 class="step-title">Elegí el fondo</h3>
            <p class="step-description">Personalizá el fondo de tu creación</p>
          </div>
          <div class="control-group">
            <label for="bgMode">Tipo de fondo</label>
            <select id="bgMode">
              <option value="solid">Color sólido</option>
              <option value="preset">Gradiente predefinido</option>
            </select>
          </div>
          <div class="control-group" id="bgSolidGroup">
            <label for="bgColor">Color sólido</label>
            <div class="color-picker">
              <input type="color" id="bgColor" value="#ffffff">
              <input type="text" id="bgColorHex" value="#ffffff" placeholder="#ffffff">
            </div>
          </div>
          <div class="control-group" id="bgPresetGroup" style="display:none;">
            <label for="bgGradient">Gradiente predefinido</label>
            <select id="bgGradient">
              <option value="linear-gradient(45deg, #667eea, #764ba2)">Azul a Púrpura</option>
              <option value="linear-gradient(45deg, #48bb78, #38a169)">Verde</option>
              <option value="linear-gradient(45deg, #ed8936, #dd6b20)">Naranja</option>
              <option value="linear-gradient(45deg, #e53e3e, #c53030)">Rojo</option>
              <option value="linear-gradient(45deg, #9f7aea, #805ad5)">Violeta</option>
              <option value="linear-gradient(45deg, #f6d365, #fda085)">Amarillo a Naranja</option>
              <option value="linear-gradient(45deg, #43cea2, #185a9d)">Verde a Azul</option>
              <option value="linear-gradient(45deg, #ff512f, #dd2476)">Rojo a Rosa</option>
              <option value="linear-gradient(45deg, #4568dc, #b06ab3)">Azul a Lila</option>
            </select>
            <div style="margin-top:0.5rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #667eea, #764ba2);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #48bb78, #38a169);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #ed8936, #dd6b20);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #e53e3e, #c53030);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #9f7aea, #805ad5);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #f6d365, #fda085);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #43cea2, #185a9d);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #ff512f, #dd2476);"></div>
              <div style="width:40px;height:40px;border-radius:8px;background:linear-gradient(45deg, #4568dc, #b06ab3);"></div>
            </div>
          </div>
          <div class="button-group">
            <button class="btn-step secondary" onclick="nextStep(4)">
              <i class="fas fa-arrow-left"></i> Volver
            </button>
          </div>
          <!-- Botones de acción solo visibles al final -->
          <div class="button-group ver-pagina-group">
          <button class="btn-step" onclick="showPreview()">
            <i class="fas fa-eye"></i> Ver página
          </button>
          </div>
          
          <div id="finalActions" style="margin-top: 1.5rem; display:none;">
            <div class="button-group">
          <button class="btn-step" onclick="restart()">
            <i class="fas fa-redo"></i> Crear Otro
          </button>
          <a class="btn-step" href="demostraciones.html" style="text-decoration:none;display:inline-block;">
            <i class="fas fa-arrow-left"></i> Volver a las demostraciones
          </a>
        </div>
            
      </div>
          <div class="highlight"><div class="highlight-icon"><i class="fas fa-lightbulb"></i></div><div class="highlight-content"><strong>💡 Tip:</strong> El fondo puede cambiar completamente el aspecto de tu página. ¡Probá colores sólidos y gradientes!</div></div>
        </div>

    <!-- Modal para mostrar código -->
    <div id="codeModal" class="code-modal">
      <div class="code-content">
        <button class="close-modal" onclick="closeCodeModal()">×</button>
        <h3><i class="fas fa-code"></i> Código Generado</h3>
        <p>Este es el código HTML y CSS que se creó automáticamente:</p>
        
        <div class="code-display">
          <h4>HTML:</h4>
          <pre id="htmlCode"></pre>
        </div>
        
        <div class="code-display">
          <h4>CSS:</h4>
          <pre id="cssCode"></pre>
        </div>
        
        <div class="button-group">
          <button class="btn-step" onclick="closeCodeModal()">
            <i class="fas fa-check"></i> Entendido
          </button>
        </div>
      </div>
    </div>

    <!-- Mover el script aquí para asegurar que el DOM esté cargado -->
    <script>
function toggleMenu() {
  const menu = document.querySelector('.menu');
  menu.classList.toggle('show');
}
// Paso actual global
window.currentStep = 1;
window.projectData = {
  text: '¡Hola Mundo!',
  fontSize: 32,
  fontFamily: 'Arial, sans-serif',
  textColor: '#667eea',
  shapeType: 'circle',
  shapeSize: 80,
  shapeColor: '#48bb78',
  animationTypeText: 'none',
  animationDurationText: 1,
  animationRepeatText: '1',
  animationTypeShape: 'none',
  animationDurationShape: 1,
  animationRepeatShape: '1',
  bgMode: 'solid',
  bgColor: '#ffffff',
  bgGradient: 'linear-gradient(45deg, #667eea, #764ba2)'
};

function updateProjectData() {
  // Paso 1
  window.projectData.text = document.getElementById('textInput').value;
  window.projectData.fontSize = parseInt(document.getElementById('fontSize').value);
  window.projectData.fontFamily = document.getElementById('fontFamily').value;
  // Paso 2
  window.projectData.shapeType = document.getElementById('shapeType').value;
  window.projectData.shapeSize = parseInt(document.getElementById('shapeSize').value);
  window.projectData.shapeColor = document.getElementById('shapeColor').value;
  // Paso 3
  window.projectData.animationTypeText = document.getElementById('animationTypeText').value;
  window.projectData.animationDurationText = parseFloat(document.getElementById('animationDurationText').value);
  window.projectData.animationRepeatText = document.getElementById('animationRepeatText').value;
  // Paso 4
  window.projectData.animationTypeShape = document.getElementById('animationTypeShape').value;
  window.projectData.animationDurationShape = parseFloat(document.getElementById('animationDurationShape').value);
  window.projectData.animationRepeatShape = document.getElementById('animationRepeatShape').value;
  // Paso 5
  window.projectData.bgMode = document.getElementById('bgMode').value;
  window.projectData.bgColor = document.getElementById('bgColor').value;
  window.projectData.bgGradient = document.getElementById('bgGradient').value;
  renderLivePreview();
}

function renderLivePreview() {
  updateProjectData();
  // Vista previa de texto en el paso 1
  let previewText = document.getElementById('previewText');
  if (previewText) {
    previewText.textContent = window.projectData.text;
    previewText.style.fontSize = window.projectData.fontSize + 'px';
    previewText.style.fontFamily = window.projectData.fontFamily;
    previewText.style.color = window.projectData.textColor;
    // Posición
    let pos = 'center'; // Eliminado
    previewText.style.display = 'flex';
    previewText.style.width = '100%';
    previewText.style.height = '60px';
    previewText.style.alignItems = 'center';
    previewText.style.justifyContent = 'center';
    previewText.style.margin = '1rem 0';
    previewText.style.textAlign = 'center'; // Eliminado
  }
  // Vista previa principal (en paso 1, 2, 3)
  let previewShape = document.getElementById('previewShape');
  if (previewShape) {
    previewShape.innerHTML = '';
    if (window.projectData.shapeType && window.projectData.shapeType !== 'none') {
      let shapeDiv = document.createElement('div');
      shapeDiv.style.width = window.projectData.shapeSize + 'px';
      shapeDiv.style.height = window.projectData.shapeSize + 'px';
      shapeDiv.style.background = window.projectData.shapeColor;
      shapeDiv.style.margin = '0 auto';
      shapeDiv.style.display = 'block';
      shapeDiv.style.position = 'relative';
      // Forma
      if (window.projectData.shapeType === 'circle') {
        shapeDiv.style.borderRadius = '50%';
      } else if (window.projectData.shapeType === 'square') {
        shapeDiv.style.borderRadius = '0';
      } else if (window.projectData.shapeType === 'triangle') {
        shapeDiv.style.background = 'none';
        shapeDiv.style.width = '0';
        shapeDiv.style.height = '0';
        shapeDiv.style.borderLeft = (window.projectData.shapeSize/2) + 'px solid transparent';
        shapeDiv.style.borderRight = (window.projectData.shapeSize/2) + 'px solid transparent';
        shapeDiv.style.borderBottom = window.projectData.shapeSize + 'px solid ' + window.projectData.shapeColor;
      } else if (window.projectData.shapeType === 'star') {
        shapeDiv.innerHTML = '<svg width="'+window.projectData.shapeSize+'" height="'+window.projectData.shapeSize+'" viewBox="0 0 100 100"><polygon points="50,5 61,39 98,39 67,59 78,91 50,70 22,91 33,59 2,39 39,39" fill="'+window.projectData.shapeColor+'"/></svg>';
        shapeDiv.style.background = 'none';
      } else if (window.projectData.shapeType === 'pentagon') {
        shapeDiv.innerHTML = '<svg width="'+window.projectData.shapeSize+'" height="'+window.projectData.shapeSize+'" viewBox="0 0 100 100"><polygon points="50,10 90,38 73,85 27,85 10,38" fill="'+window.projectData.shapeColor+'"/></svg>';
        shapeDiv.style.background = 'none';
      }
      previewShape.appendChild(shapeDiv);
    }
  }
  // Vista previa de animación (paso 3)
  let previewAnimation = document.getElementById('previewAnimation');
  if (previewAnimation) {
    previewAnimation.innerHTML = '';
    // Texto
    let textDiv = document.createElement('div');
    textDiv.textContent = window.projectData.text;
    textDiv.style.fontSize = window.projectData.fontSize + 'px';
    textDiv.style.fontFamily = window.projectData.fontFamily;
    textDiv.style.color = window.projectData.textColor;
    textDiv.style.marginBottom = '1rem';
    // Animación texto
    applyAnimation(textDiv, window.projectData.animationTypeText, window.projectData.animationDurationText, window.projectData.animationRepeatText);
    previewAnimation.appendChild(textDiv);
    // Figura
    if (window.projectData.shapeType && window.projectData.shapeType !== 'none') {
      let shapeDiv = document.createElement('div');
      shapeDiv.style.width = window.projectData.shapeSize + 'px';
      shapeDiv.style.height = window.projectData.shapeSize + 'px';
      shapeDiv.style.background = window.projectData.shapeColor;
      shapeDiv.style.margin = '0 auto';
      shapeDiv.style.display = 'block';
      shapeDiv.style.position = 'relative';
      // Forma
      if (window.projectData.shapeType === 'circle') {
        shapeDiv.style.borderRadius = '50%';
      } else if (window.projectData.shapeType === 'square') {
        shapeDiv.style.borderRadius = '0';
      } else if (window.projectData.shapeType === 'triangle') {
        shapeDiv.style.background = 'none';
        shapeDiv.style.width = '0';
        shapeDiv.style.height = '0';
        shapeDiv.style.borderLeft = (window.projectData.shapeSize/2) + 'px solid transparent';
        shapeDiv.style.borderRight = (window.projectData.shapeSize/2) + 'px solid transparent';
        shapeDiv.style.borderBottom = window.projectData.shapeSize + 'px solid ' + window.projectData.shapeColor;
      } else if (window.projectData.shapeType === 'star') {
        shapeDiv.innerHTML = '<svg width="'+window.projectData.shapeSize+'" height="'+window.projectData.shapeSize+'" viewBox="0 0 100 100"><polygon points="50,5 61,39 98,39 67,59 78,91 50,70 22,91 33,59 2,39 39,39" fill="'+window.projectData.shapeColor+'"/></svg>';
        shapeDiv.style.background = 'none';
      } else if (window.projectData.shapeType === 'pentagon') {
        shapeDiv.innerHTML = '<svg width="'+window.projectData.shapeSize+'" height="'+window.projectData.shapeSize+'" viewBox="0 0 100 100"><polygon points="50,10 90,38 73,85 27,85 10,38" fill="'+window.projectData.shapeColor+'"/></svg>';
        shapeDiv.style.background = 'none';
      }
      // Animación figura
      applyAnimation(shapeDiv, window.projectData.animationTypeShape, window.projectData.animationDurationShape, window.projectData.animationRepeatShape);
      previewAnimation.appendChild(shapeDiv);
    }
  }
}

function applyAnimation(element, type, duration, repeat) {
  let anim = '';
  if (type === 'bounce') {
    anim = `bounce ${duration}s ${repeat === 'infinite' ? 'infinite' : repeat}`;
  } else if (type === 'pulse') {
    anim = `pulse ${duration}s ${repeat === 'infinite' ? 'infinite' : repeat}`;
  } else if (type === 'rotate') {
    anim = `rotate ${duration}s linear ${repeat === 'infinite' ? 'infinite' : repeat}`;
  } else if (type === 'slide') {
    anim = `slide ${duration}s ${repeat === 'infinite' ? 'infinite' : repeat}`;
  } else if (type === 'fadeIn') {
    anim = `fadeIn ${duration}s ${repeat === 'infinite' ? 'infinite' : repeat}`;
  } else if (type === 'glow') {
    anim = `glow ${duration}s ${repeat === 'infinite' ? 'infinite' : repeat}`;
  }
  if (anim) {
    element.style.animation = anim;
  }
}

// Animaciones CSS (agregar al head si no existen)
(function ensureAnimations() {
  if (!document.getElementById('editor-anim-styles')) {
    const style = document.createElement('style');
    style.id = 'editor-anim-styles';
    style.textContent = `
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-30%); } }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
@keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes slide { 0% { transform: translateX(-50%); opacity:0; } 100% { transform: translateX(0); opacity:1; } }
@keyframes fadeIn { 0% { opacity: 0; } 100% { opacity: 1; } }
@keyframes glow { 0%, 100% { filter: drop-shadow(0 0 0px #fff); } 50% { filter: drop-shadow(0 0 16px #ffd700); } }
`;
    document.head.appendChild(style);
  }
})();

// Sincronizar controles con datos y vista previa
function syncAllControls() {
  // Paso 1
  document.getElementById('textInput').value = window.projectData.text;
  document.getElementById('fontSize').value = window.projectData.fontSize;
  document.getElementById('fontSizeValue').textContent = window.projectData.fontSize + 'px';
  document.getElementById('fontFamily').value = window.projectData.fontFamily;
  // Paso 2
  document.getElementById('shapeType').value = window.projectData.shapeType;
  document.getElementById('shapeSize').value = window.projectData.shapeSize;
  document.getElementById('shapeSizeValue').textContent = window.projectData.shapeSize + 'px';
  document.getElementById('shapeColor').value = window.projectData.shapeColor;
  document.getElementById('shapeColorHex').value = window.projectData.shapeColor;
  // Paso 3
  document.getElementById('animationTypeText').value = window.projectData.animationTypeText;
  document.getElementById('animationDurationText').value = window.projectData.animationDurationText;
  document.getElementById('animationDurationValueText').textContent = window.projectData.animationDurationText + 's';
  document.getElementById('animationRepeatText').value = window.projectData.animationRepeatText;
  // Paso 4
  document.getElementById('animationTypeShape').value = window.projectData.animationTypeShape;
  document.getElementById('animationDurationShape').value = window.projectData.animationDurationShape;
  document.getElementById('animationDurationValueShape').textContent = window.projectData.animationDurationShape + 's';
  document.getElementById('animationRepeatShape').value = window.projectData.animationRepeatShape;
  // Paso 5
  document.getElementById('bgMode').value = window.projectData.bgMode;
  document.getElementById('bgColor').value = window.projectData.bgColor;
  document.getElementById('bgColorHex').value = window.projectData.bgColor;
  document.getElementById('bgGradient').value = window.projectData.bgGradient;
  renderLivePreview();
}

// Listeners para todos los controles relevantes
function addLiveListeners() {
  const ids = [
    'textInput','fontSize','fontFamily',
    'shapeType','shapeSize','shapeColor','shapeColorHex',
    'animationTypeText','animationDurationText','animationRepeatText',
    'animationTypeShape','animationDurationShape','animationRepeatShape',
    'bgMode','bgColor','bgColorHex','bgGradient'
  ];
  ids.forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      el.addEventListener('input', function() {
        if (id === 'fontSize') {
          document.getElementById('fontSizeValue').textContent = this.value + 'px';
        }
        if (id === 'shapeSize') document.getElementById('shapeSizeValue').textContent = this.value + 'px';
        if (id === 'animationDurationText') document.getElementById('animationDurationValueText').textContent = this.value + 's';
        if (id === 'animationDurationShape') document.getElementById('animationDurationValueShape').textContent = this.value + 's';
        if (id === 'shapeColor') document.getElementById('shapeColorHex').value = this.value;
        if (id === 'shapeColorHex') document.getElementById('shapeColor').value = this.value;
        if (id === 'bgColor') document.getElementById('bgColorHex').value = this.value;
        if (id === 'bgColorHex') document.getElementById('bgColor').value = this.value;
        updateProjectData();
        renderLivePreview();
      });
    }
  });
}
function nextStep(step) {
  document.getElementById('step' + window.currentStep).classList.remove('active');
  document.getElementById('step' + step).classList.add('active');
  window.currentStep = step;
  window.scrollTo({top: 0, behavior: 'smooth'});
}
function updateFinalActionsVisibility() {
  var actions = document.getElementById('finalActions');
  if (!actions) return;
  if (window.currentStep === 5) {
    actions.style.display = 'flex';
  } else {
    actions.style.display = 'none';
  }
}
// Llama a updateFinalActionsVisibility en nextStep y al cargar
var _originalNextStep = nextStep;
nextStep = function(step) {
  _originalNextStep(step);
  updateFinalActionsVisibility();
};
function updateBgControls() {
  var mode = document.getElementById('bgMode').value;
  var solidGroup = document.getElementById('bgSolidGroup');
  var presetGroup = document.getElementById('bgPresetGroup');
  if (solidGroup) solidGroup.style.display = (mode === 'solid') ? '' : 'none';
  if (presetGroup) presetGroup.style.display = (mode === 'preset') ? '' : 'none';
}
document.getElementById('bgMode').addEventListener('change', updateBgControls);
document.addEventListener('DOMContentLoaded', function() {
  // Menú
  document.querySelector('.menu-toggle').onclick = toggleMenu;
  document.querySelectorAll('.menu a').forEach(link => {
    link.addEventListener('click', function() {
      const menu = document.querySelector('.menu');
      if (menu.classList.contains('show')) menu.classList.remove('show');
    });
  });
  document.addEventListener('click', function(event) {
    const menu = document.querySelector('.menu');
    const menuToggle = document.querySelector('.menu-toggle');
    if (menu.classList.contains('show') && !menu.contains(event.target) && !menuToggle.contains(event.target)) {
      menu.classList.remove('show');
    }
  });
  // Listeners para vista previa en vivo
  addLiveListeners();
  syncAllControls();
  updateFinalActionsVisibility();
  updateBgControls();
});

function showPreview() {
  // Crear un modal para mostrar la página generada
  const modal = document.createElement('div');
  modal.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  `;
  
  // Generar HTML y CSS completos
  var html = '<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">';
  html += '<title>Mi Página Generada</title>';
  html += '<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">';
  var css = 'body{background:#f7fafc;margin:0;padding:0;min-height:100vh;font-family:Inter,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;}';
  css += '.main-header{width:100%;background:linear-gradient(90deg,#667eea,#764ba2);color:#fff;padding:1.5rem 0;text-align:center;box-shadow:0 2px 12px rgba(102,126,234,0.10);font-size:2rem;font-weight:700;letter-spacing:1px;margin-bottom:2rem;}';
  css += '.contenedor{background:#fff;border-radius:18px;box-shadow:0 8px 32px rgba(102,126,234,0.10);padding:2.5rem 2rem;max-width:480px;width:95vw;margin:2rem auto 0 auto;display:flex;flex-direction:column;align-items:center;}';
  css += '.texto{font-size:' + (window.projectData?.fontSize||32) + 'px;color:' + (window.projectData?.textColor||'#667eea') + ';font-family:' + (window.projectData?.fontFamily||'Inter,sans-serif') + ';margin-bottom:1.5rem;text-align:center;width:100%;font-weight:600;}';
  if(window.projectData?.shapeType && window.projectData.shapeType !== 'none') {
    if (window.projectData.shapeType === 'star' || window.projectData.shapeType === 'pentagon') {
      css += '.figura{display:block;margin:0 auto 1.5rem auto;background:none;padding:0;border:none;width:auto;height:auto;}';
    } else if (window.projectData.shapeType === 'triangle') {
      css += '.figura{background:none;display:block;margin:0 auto 1.5rem auto;width:' + (window.projectData?.shapeSize||80) + 'px;height:' + (window.projectData?.shapeSize||80) + 'px;}';
    } else if (window.projectData.shapeType === 'circle') {
      css += '.figura{width:' + (window.projectData?.shapeSize||80) + 'px;height:' + (window.projectData?.shapeSize||80) + 'px;background:' + (window.projectData?.shapeColor||'#48bb78') + ';margin:0 auto 1.5rem auto;display:block;border-radius:50%;}';
    } else if (window.projectData.shapeType === 'square') {
      css += '.figura{width:' + (window.projectData?.shapeSize||80) + 'px;height:' + (window.projectData?.shapeSize||80) + 'px;background:' + (window.projectData?.shapeColor||'#48bb78') + ';margin:0 auto 1.5rem auto;display:block;border-radius:0;}';
    }
  }
  // Fondo
  if (window.projectData.bgMode === 'solid') {
    css += '.contenedor{background:' + (window.projectData.bgColor || '#fff') + ';}';
  } else if (window.projectData.bgMode === 'preset') {
    css += '.contenedor{background:' + (window.projectData.bgGradient || 'linear-gradient(45deg, #667eea, #764ba2)') + ';}';
  }
  css += '.volver-btn{display:inline-block;margin-top:2.5rem;padding:0.9rem 2.2rem;background:#667eea;color:#fff;border-radius:10px;text-decoration:none;font-weight:700;font-size:1.1rem;box-shadow:0 2px 8px rgba(102,126,234,0.10);transition:background 0.2s;}';
  css += '.volver-btn:hover{background:#764ba2;}';
  // Animaciones CSS
  let animCSS = '';
  animCSS += '@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-30%); } }';
  animCSS += '@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }';
  animCSS += '@keyframes rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }';
  animCSS += '@keyframes slide { 0% { transform: translateX(-50%); opacity:0; } 100% { transform: translateX(0); opacity:1; } }';
  animCSS += '@keyframes fadeIn { 0% { opacity: 0; } 100% { opacity: 1; } }';
  animCSS += '@keyframes glow { 0%, 100% { filter: drop-shadow(0 0 0px #fff); } 50% { filter: drop-shadow(0 0 16px #ffd700); } }';

  // Animación texto
  let animText = '';
  if (window.projectData.animationTypeText && window.projectData.animationTypeText !== 'none') {
    let type = window.projectData.animationTypeText;
    let duration = window.projectData.animationDurationText || 1;
    let repeat = window.projectData.animationRepeatText || 1;
    let infinite = repeat === 'infinite' ? 'infinite' : repeat;
    let extra = type === 'rotate' ? ' linear' : '';
    animText = type + ' ' + duration + 's' + extra + ' ' + infinite;
    css += '.texto{animation:' + animText + ';}';
  }
  // Animación figura
  let animShape = '';
  if (window.projectData.animationTypeShape && window.projectData.animationTypeShape !== 'none') {
    let type = window.projectData.animationTypeShape;
    let duration = window.projectData.animationDurationShape || 1;
    let repeat = window.projectData.animationRepeatShape || 1;
    let infinite = repeat === 'infinite' ? 'infinite' : repeat;
    let extra = type === 'rotate' ? ' linear' : '';
    animShape = type + ' ' + duration + 's' + extra + ' ' + infinite;
    if(window.projectData.shapeType === 'pentagon') {
      css += '.figura svg{animation:' + animShape + ';}';
    } else {
      css += '.figura{animation:' + animShape + ';}';
    }
  }

  html += '<style>' + css + animCSS + '</style>';
  html += '</head><body>';
  html += '<div class="main-header">Mi Página Generada</div>';
  html += '<div class="contenedor">';
  html += '<div class="texto">' + (window.projectData?.text||'¡Hola Mundo!') + '</div>';
  if(window.projectData?.shapeType && window.projectData.shapeType !== 'none') {
    if (window.projectData.shapeType === 'star') {
      html += '<div class="figura"><svg width="'+(window.projectData.shapeSize||80)+'" height="'+(window.projectData.shapeSize||80)+'" viewBox="0 0 100 100"><polygon points="50,5 61,39 98,39 67,59 78,91 50,70 22,91 33,59 2,39 39,39" fill="'+(window.projectData.shapeColor||'#48bb78')+'"/></svg></div>';
    } else if (window.projectData.shapeType === 'pentagon') {
      html += '<div class="figura"><svg width="'+(window.projectData.shapeSize||80)+'" height="'+(window.projectData.shapeSize||80)+'" viewBox="0 0 100 100"><polygon points="50,10 90,38 73,85 27,85 10,38" fill="'+(window.projectData.shapeColor||'#48bb78')+'"/></svg></div>';
    } else if (window.projectData.shapeType === 'triangle') {
      html += '<div class="figura" style="background:none;width:0;height:0;border-left:'+(window.projectData.shapeSize/2)+'px solid transparent;border-right:'+(window.projectData.shapeSize/2)+'px solid transparent;border-bottom:'+(window.projectData.shapeSize)+'px solid '+(window.projectData.shapeColor||'#48bb78')+';"></div>';
    } else {
    html += '<div class="figura"></div>';
    }
  }
  html += '</div>';
  html += '<a href="../index.html" class="volver-btn">← Volver al inicio</a>';
  html += '</body></html>';
  
  // Crear iframe para mostrar la página generada
  const iframe = document.createElement('iframe');
  iframe.style.cssText = `
    width: 100%;
    height: 100%;
    border: none;
    border-radius: 10px;
    background: white;
  `;
  iframe.srcdoc = html;
  
  // Botón para cerrar el modal
  const closeBtn = document.createElement('button');
  closeBtn.innerHTML = '×';
  closeBtn.style.cssText = `
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    border: 2px solid #667eea;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10001;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
  `;
  
  // Efectos hover para el botón
  closeBtn.onmouseenter = function() {
    this.style.background = '#667eea';
    this.style.color = 'white';
    this.style.transform = 'scale(1.1)';
  };
  
  closeBtn.onmouseleave = function() {
    this.style.background = 'rgba(255, 255, 255, 0.95)';
    this.style.color = '#333';
    this.style.transform = 'scale(1)';
  };
  
  closeBtn.onclick = function() {
    document.body.removeChild(modal);
  };
  
  // Cerrar modal al hacer clic fuera del iframe
  modal.onclick = function(e) {
    if (e.target === modal) {
      document.body.removeChild(modal);
    }
  };
  
  modal.appendChild(iframe);
  modal.appendChild(closeBtn);
  document.body.appendChild(modal);
}
function restart() {
  // Opcional: puedes resetear campos aquí si lo deseas
  nextStep(1);
}
    </script>
  </body>
</html> 